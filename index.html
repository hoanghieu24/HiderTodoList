<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="HiderBuilding.png">
    <title>HiderBuilding.io - Quản lý công việc dự án</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a3a5f;
            --secondary-color: #2c5282;
            --accent-color: #3182ce;
            --light-gray: #f8f9fa;
            --medium-gray: #e9ecef;
            --dark-gray: #212529;
            --white: #ffffff;
            --pending: #f59e0b;
            --doing: #3b82f6;
            --blocked: #ef4444;
            --done: #10b981;
            --property: #8b5cf6;
            --note: #ec4899;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            --radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f7fa;
            color: var(--dark-gray);
            line-height: 1.5;
            padding: 0;
            margin: 0;
            min-height: 100vh;
        }

        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logo-img {
            width: 34px;
            height: 34px;
            object-fit: contain;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .clock {
            font-size: 1.2rem;
            font-weight: 500;
            color: white;
            margin-right: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #dfe1e6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }

        .dashboard {
            display: flex;
            min-height: calc(100vh - 60px);
        }

        .sidebar {
            width: 250px;
            background-color: var(--white);
            box-shadow: var(--shadow);
            padding: 20px 0;
            display: flex;
            flex-direction: column;
        }

        .sidebar-menu {
            list-style: none;
            margin-top: 20px;
        }

        .sidebar-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }

        .sidebar-item:hover {
            background-color: var(--light-gray);
        }

        .sidebar-item.active {
            background-color: rgba(26, 58, 95, 0.1);
            border-left-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: 500;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .project-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .project-select {
            padding: 8px 12px;
            border: 1px solid var(--medium-gray);
            border-radius: var(--radius);
            background-color: var(--white);
            min-width: 200px;
        }

        .kanban-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .status-column {
            background-color: var(--white);
            border-radius: var(--radius);
            padding: 15px;
            box-shadow: var(--shadow);
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid;
        }

        .status-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-count {
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 12px;
        }

        .status-pending .status-header {
            color: var(--pending);
            border-color: var(--pending);
        }

        .status-doing .status-header {
            color: var(--doing);
            border-color: var(--doing);
        }

        .status-blocked .status-header {
            color: var(--blocked);
            border-color: var(--blocked);
        }

        .status-done .status-header {
            color: var(--done);
            border-color: var(--done);
        }

        .task-list {
            min-height: 100px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .task {
            background-color: var(--white);
            border-radius: var(--radius);
            padding: 12px;
            margin-bottom: 10px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 4px solid;
        }

        .task-pending {
            border-left-color: var(--pending);
        }

        .task-doing {
            border-left-color: var(--doing);
        }

        .task-blocked {
            border-left-color: var(--blocked);
        }

        .task-done {
            border-left-color: var(--done);
        }

        .task:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .task-title {
            font-weight: 500;
            margin-bottom: 5px;
            word-break: break-word;
        }

        .task-desc {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #6b7280;
        }

        .task-date {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .task-actions {
            display: flex;
            gap: 8px;
        }

        .task-action {
            color: #6b7280;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .task-action:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .add-task-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #6b7280;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            width: 100%;
            border: none;
            background: none;
            margin-top: 10px;
        }

        .add-task-btn:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .add-task-form {
            margin-top: 10px;
            display: none;
        }

        .add-task-form.active {
            display: block;
        }

        .add-task-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--medium-gray);
            border-radius: var(--radius);
            margin-bottom: 8px;
            font-family: inherit;
            resize: none;
        }

        .add-task-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .add-task-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .add-task-submit {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 8px 12px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .add-task-submit:hover {
            background-color: var(--secondary-color);
        }

        .cancel-add-task {
            font-size: 20px;
            color: #6b7280;
            cursor: pointer;
        }

        .btn {
            padding: 8px 16px;
            border-radius: var(--radius);
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: var(--light-gray);
            color: var(--dark-gray);
        }

        .btn-secondary:hover {
            background-color: #e2e4e9;
        }

        .btn-danger {
            background-color: var(--blocked);
            color: white;
        }

        .btn-danger:hover {
            background-color: #dc2626;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: var(--radius);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--medium-gray);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .modal-close {
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-input,
        .form-textarea,
        .form-select,
        .form-date {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--medium-gray);
            border-radius: var(--radius);
            font-family: inherit;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus,
        .form-date:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(49, 130, 206, 0.2);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding-top: 15px;
            border-top: 1px solid var(--medium-gray);
        }

        .image-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed var(--medium-gray);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .image-upload:hover {
            border-color: var(--accent-color);
        }

        .image-upload i {
            font-size: 24px;
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .uploaded-images {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .image-preview {
            position: relative;
            border-radius: var(--radius);
            overflow: hidden;
            height: 100px;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(239, 68, 68, 0.8);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }

        .notes-container {
            margin-top: 20px;
        }

        .note-item {
            background-color: var(--light-gray);
            border-radius: var(--radius);
            padding: 12px;
            margin-bottom: 10px;
            position: relative;
        }

        .note-date {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .note-content {
            margin-bottom: 5px;
        }

        .note-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 5px;
        }

        .note-action {
            color: var(--accent-color);
            cursor: pointer;
            font-size: 12px;
        }

        .note-action.delete {
            color: var(--blocked);
        }

        .empty-state {
            text-align: center;
            padding: 20px;
            color: #6b7280;
        }

        .empty-state i {
            font-size: 40px;
            margin-bottom: 10px;
            color: #d1d5db;
        }

        .priority-badge {
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 500;
        }

        .priority-high {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--blocked);
        }

        .priority-medium {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--pending);
        }

        .priority-low {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--done);
        }

        .task-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-bottom: 8px;
        }

        .task-tag {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            background-color: #e5e7eb;
            color: #4b5563;
        }

        @media (max-width: 992px) {
            .dashboard {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 10px;
            }
            
            .sidebar-menu {
                display: flex;
                overflow-x: auto;
                margin-top: 10px;
            }
            
            .sidebar-item {
                border-left: none;
                border-bottom: 3px solid transparent;
                white-space: nowrap;
            }
            
            .sidebar-item.active {
                border-left: none;
                border-bottom-color: var(--primary-color);
            }
        }

        @media (max-width: 768px) {
            .kanban-board {
                grid-template-columns: 1fr;
            }
            
            .project-selector {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>

<body>
    <header class="header">
        <div class="logo">
            <img src="HiderBuilding-Photoroom.png" alt="logo" class="logo-img">
            <span>HiderBuilding.io</span>
        </div>
        <div class="user-menu">
            <div id="clock" class="clock">00:00:00</div>
            <div class="avatar">H</div>
        </div>
    </header>

    <div class="dashboard">
        <aside class="sidebar">
            <div class="sidebar-menu">
                <div class="sidebar-item active">
                    <i class="fas fa-tasks"></i>
                    <span>Quản lý công việc</span>
                </div>
                <div class="sidebar-item">
                    <i class="fas fa-building"></i>
                    <span>Dự án</span>
                </div>
                <div class="sidebar-item">
                    <i class="fas fa-images"></i>
                    <span>Hình ảnh</span>
                </div>
                <div class="sidebar-item">
                    <i class="fas fa-sticky-note"></i>
                    <span>Ghi chú</span>
                </div>
                <div class="sidebar-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Báo cáo</span>
                </div>
                <div class="sidebar-item">
                    <i class="fas fa-cog"></i>
                    <span>Cài đặt</span>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <div class="page-header">
                <h1 class="page-title">Quản lý công việc</h1>
                <button class="btn btn-primary" onclick="showAddProjectModal()">
                    <i class="fas fa-plus"></i> Thêm dự án
                </button>
            </div>

            <div class="project-selector">
                <label for="project-select">Chọn dự án:</label>
                <select class="project-select" id="project-select" onchange="changeProject(this.value)">
                    <option value="">-- Chọn dự án --</option>
                </select>
                <button class="btn btn-primary" onclick="showAddTaskModal()">
                    <i class="fas fa-plus"></i> Thêm công việc
                </button>
            </div>

            <div class="kanban-board">
                <div class="status-column status-pending">
                    <div class="status-header">
                        <div class="status-title">
                            <i class="fas fa-clock"></i>
                            <span>Đang chờ</span>
                        </div>
                        <span class="status-count" id="pending-count">0</span>
                    </div>
                    <div class="task-list" data-status="pending" id="pending-tasks">
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>Không có công việc nào</p>
                        </div>
                    </div>
                    <button class="add-task-btn" onclick="showAddTaskForm('pending')">
                        <i class="fas fa-plus"></i> Thêm công việc
                    </button>
                    <div class="add-task-form" id="add-task-form-pending">
                        <textarea class="add-task-input" placeholder="Nhập tiêu đề công việc..."></textarea>
                        <div class="add-task-controls">
                            <button class="add-task-submit" onclick="addTaskFromForm('pending')">Thêm</button>
                            <i class="fas fa-times cancel-add-task" onclick="hideAddTaskForm('pending')"></i>
                        </div>
                    </div>
                </div>
                
                <div class="status-column status-doing">
                    <div class="status-header">
                        <div class="status-title">
                            <i class="fas fa-hard-hat"></i>
                            <span>Đang làm</span>
                        </div>
                        <span class="status-count" id="doing-count">0</span>
                    </div>
                    <div class="task-list" data-status="doing" id="doing-tasks">
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>Không có công việc nào</p>
                        </div>
                    </div>
                    <button class="add-task-btn" onclick="showAddTaskForm('doing')">
                        <i class="fas fa-plus"></i> Thêm công việc
                    </button>
                    <div class="add-task-form" id="add-task-form-doing">
                        <textarea class="add-task-input" placeholder="Nhập tiêu đề công việc..."></textarea>
                        <div class="add-task-controls">
                            <button class="add-task-submit" onclick="addTaskFromForm('doing')">Thêm</button>
                            <i class="fas fa-times cancel-add-task" onclick="hideAddTaskForm('doing')"></i>
                        </div>
                    </div>
                </div>
                
                <div class="status-column status-blocked">
                    <div class="status-header">
                        <div class="status-title">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Bị mắc</span>
                        </div>
                        <span class="status-count" id="blocked-count">0</span>
                    </div>
                    <div class="task-list" data-status="blocked" id="blocked-tasks">
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>Không có công việc nào</p>
                        </div>
                    </div>
                    <button class="add-task-btn" onclick="showAddTaskForm('blocked')">
                        <i class="fas fa-plus"></i> Thêm công việc
                    </button>
                    <div class="add-task-form" id="add-task-form-blocked">
                        <textarea class="add-task-input" placeholder="Nhập tiêu đề công việc..."></textarea>
                        <div class="add-task-controls">
                            <button class="add-task-submit" onclick="addTaskFromForm('blocked')">Thêm</button>
                            <i class="fas fa-times cancel-add-task" onclick="hideAddTaskForm('blocked')"></i>
                        </div>
                    </div>
                </div>
                
                <div class="status-column status-done">
                    <div class="status-header">
                        <div class="status-title">
                            <i class="fas fa-check-circle"></i>
                            <span>Đã hoàn thành</span>
                        </div>
                        <span class="status-count" id="done-count">0</span>
                    </div>
                    <div class="task-list" data-status="done" id="done-tasks">
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>Không có công việc nào</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Project Modal -->
    <div class="modal" id="add-project-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm dự án mới</h3>
                <span class="modal-close" onclick="hideModal('add-project-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Tên dự án</label>
                    <input type="text" class="form-input" id="project-name" placeholder="Nhập tên dự án">
                </div>
                <div class="form-group">
                    <label class="form-label">Mô tả dự án</label>
                    <textarea class="form-textarea" id="project-desc" placeholder="Nhập mô tả dự án"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Địa chỉ</label>
                    <textarea class="form-textarea" id="project-address" placeholder="Nhập địa chỉ dự án"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Hình ảnh dự án</label>
                    <div class="image-upload" onclick="document.getElementById('project-images').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Nhấp để tải lên hoặc kéo thả hình ảnh</p>
                        <input type="file" id="project-images" multiple style="display: none;" onchange="handleImageUpload(event, 'project')">
                    </div>
                    <div class="uploaded-images" id="project-uploaded-images">
                        <!-- Uploaded images will appear here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('add-project-modal')">Hủy</button>
                <button class="btn btn-primary" onclick="addNewProject()">Thêm dự án</button>
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div class="modal" id="add-task-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm công việc mới</h3>
                <span class="modal-close" onclick="hideModal('add-task-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Tiêu đề công việc</label>
                    <input type="text" class="form-input" id="task-title" placeholder="Nhập tiêu đề công việc">
                </div>
                <div class="form-group">
                    <label class="form-label">Mô tả chi tiết</label>
                    <textarea class="form-textarea" id="task-desc" placeholder="Nhập mô tả chi tiết"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Trạng thái</label>
                    <select class="form-select" id="task-status">
                        <option value="pending">Đang chờ</option>
                        <option value="doing">Đang làm</option>
                        <option value="blocked">Bị mắc</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ưu tiên</label>
                    <select class="form-select" id="task-priority">
                        <option value="low">Thấp</option>
                        <option value="medium" selected>Trung bình</option>
                        <option value="high">Cao</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Hạn hoàn thành</label>
                    <input type="date" class="form-date" id="task-deadline">
                </div>
                <div class="form-group">
                    <label class="form-label">Tags</label>
                    <input type="text" class="form-input" id="task-tags" placeholder="Nhập tags, phân cách bằng dấu phẩy">
                </div>
                <div class="form-group">
                    <label class="form-label">Hình ảnh đính kèm</label>
                    <div class="image-upload" onclick="document.getElementById('task-images').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Nhấp để tải lên hoặc kéo thả hình ảnh</p>
                        <input type="file" id="task-images" multiple style="display: none;" onchange="handleImageUpload(event, 'task')">
                    </div>
                    <div class="uploaded-images" id="task-uploaded-images">
                        <!-- Uploaded images will appear here -->
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Ghi chú</label>
                    <textarea class="form-textarea" id="task-notes" placeholder="Thêm ghi chú cho công việc"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('add-task-modal')">Hủy</button>
                <button class="btn btn-primary" onclick="addNewTask()">Thêm công việc</button>
            </div>
        </div>
    </div>

    <!-- Task Detail Modal -->
    <div class="modal" id="task-detail-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Chi tiết công việc</h3>
                <span class="modal-close" onclick="hideModal('task-detail-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <!-- Content will be loaded dynamically -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="deleteCurrentTask()">Xóa</button>
                <button class="btn btn-secondary" onclick="hideModal('task-detail-modal')">Đóng</button>
                <button class="btn btn-primary" id="edit-task-btn">Chỉnh sửa</button>
            </div>
        </div>
    </div>

    <!-- Edit Task Modal -->
    <div class="modal" id="edit-task-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Chỉnh sửa công việc</h3>
                <span class="modal-close" onclick="hideModal('edit-task-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Tiêu đề công việc</label>
                    <input type="text" class="form-input" id="edit-task-title" placeholder="Nhập tiêu đề công việc">
                </div>
                <div class="form-group">
                    <label class="form-label">Mô tả chi tiết</label>
                    <textarea class="form-textarea" id="edit-task-desc" placeholder="Nhập mô tả chi tiết"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Trạng thái</label>
                    <select class="form-select" id="edit-task-status">
                        <option value="pending">Đang chờ</option>
                        <option value="doing">Đang làm</option>
                        <option value="blocked">Bị mắc</option>
                        <option value="done">Đã hoàn thành</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ưu tiên</label>
                    <select class="form-select" id="edit-task-priority">
                        <option value="low">Thấp</option>
                        <option value="medium">Trung bình</option>
                        <option value="high">Cao</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Hạn hoàn thành</label>
                    <input type="date" class="form-date" id="edit-task-deadline">
                </div>
                <div class="form-group">
                    <label class="form-label">Tags</label>
                    <input type="text" class="form-input" id="edit-task-tags" placeholder="Nhập tags, phân cách bằng dấu phẩy">
                </div>
                <div class="form-group">
                    <label class="form-label">Hình ảnh đính kèm</label>
                    <div class="image-upload" onclick="document.getElementById('edit-task-images').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Nhấp để tải lên hoặc kéo thả hình ảnh</p>
                        <input type="file" id="edit-task-images" multiple style="display: none;" onchange="handleImageUpload(event, 'edit-task')">
                    </div>
                    <div class="uploaded-images" id="edit-task-uploaded-images">
                        <!-- Uploaded images will appear here -->
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Ghi chú</label>
                    <textarea class="form-textarea" id="edit-task-notes" placeholder="Thêm ghi chú cho công việc"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('edit-task-modal')">Hủy</button>
                <button class="btn btn-primary" onclick="saveTaskChanges()">Lưu thay đổi</button>
            </div>
        </div>
    </div>

    <script>
        // State management
        const state = {
            projects: JSON.parse(localStorage.getItem('hiderBuildingProjects')) || [],
            currentProjectId: null,
            currentTask: null,
            uploadedImages: {
                project: [],
                task: [],
                'edit-task': []
            }
        };

        // DOM Elements
        const projectSelect = document.getElementById('project-select');
        const clockElement = document.getElementById('clock');

        // Initialize the app
        function init() {
            renderProjectOptions();
            updateClock();
            setInterval(updateClock, 1000);
            
            // Load sample data if empty
            if (state.projects.length === 0) {
                loadSampleData();
            }
            
            // Select first project by default
            if (state.projects.length > 0) {
                state.currentProjectId = state.projects[0].id;
                projectSelect.value = state.currentProjectId;
                renderTasks();
            }
        }

        // Render project options in select
        function renderProjectOptions() {
            projectSelect.innerHTML = '<option value="">-- Chọn dự án --</option>';
            
            state.projects.forEach(project => {
                const option = document.createElement('option');
                option.value = project.id;
                option.textContent = project.name;
                projectSelect.appendChild(option);
            });
        }

        // Change current project
        function changeProject(projectId) {
            state.currentProjectId = projectId;
            renderTasks();
        }

        // Get current project
        function getCurrentProject() {
            return state.projects.find(p => p.id === state.currentProjectId);
        }

        // Render tasks for current project
        function renderTasks() {
            const project = getCurrentProject();
            if (!project) {
                // Clear all task lists
                ['pending', 'doing', 'blocked', 'done'].forEach(status => {
                    const taskList = document.getElementById(`${status}-tasks`);
                    taskList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>Không có công việc nào</p>
                        </div>
                    `;
                    document.getElementById(`${status}-count`).textContent = '0';
                });
                return;
            }
            
            // Render tasks for each status
            ['pending', 'doing', 'blocked', 'done'].forEach(status => {
                const tasks = project.tasks.filter(t => t.status === status);
                const taskList = document.getElementById(`${status}-tasks`);
                const countElement = document.getElementById(`${status}-count`);
                
                countElement.textContent = tasks.length;
                
                if (tasks.length === 0) {
                    taskList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>Không có công việc nào</p>
                        </div>
                    `;
                } else {
                    taskList.innerHTML = '';
                    tasks.forEach(task => {
                        const taskElement = createTaskElement(task);
                        taskList.appendChild(taskElement);
                    });
                }
            });
            
            // Setup drag and drop
            setupDragAndDrop();
        }

        // Create task element
        function createTaskElement(task) {
            const taskEl = document.createElement('div');
            taskEl.className = `task task-${task.status}`;
            taskEl.dataset.taskId = task.id;
            taskEl.draggable = true;
            
            const deadlineText = task.deadline ? formatDate(task.deadline) : 'Không có hạn';
            const priorityText = getPriorityText(task.priority);
            const priorityClass = `priority-${task.priority}`;
            
            let tagsHTML = '';
            if (task.tags && task.tags.length > 0) {
                tagsHTML = `<div class="task-tags">${task.tags.map(tag => `<span class="task-tag">${tag}</span>`).join('')}</div>`;
            }
            
            taskEl.innerHTML = `
                ${tagsHTML}
                <div class="task-title">${task.title}</div>
                ${task.description ? `<div class="task-desc">${task.description}</div>` : ''}
                <div class="task-meta">
                    <div>
                        <div class="task-date">
                            <i class="far fa-calendar-alt"></i>
                            <span>${deadlineText}</span>
                        </div>
                        <div class="priority-badge ${priorityClass}">${priorityText}</div>
                    </div>
                    <div class="task-actions">
                        <i class="fas fa-edit task-action" onclick="event.stopPropagation(); editTask('${task.id}')"></i>
                        <i class="fas fa-trash task-action" onclick="event.stopPropagation(); deleteTask('${task.id}')"></i>
                    </div>
                </div>
            `;
            
            taskEl.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('taskId', task.id);
                e.dataTransfer.setData('fromStatus', task.status);
            });
            
            taskEl.addEventListener('click', () => {
                viewTask(task.id);
            });
            
            return taskEl;
        }

        // Setup drag and drop
        function setupDragAndDrop() {
            const taskLists = document.querySelectorAll('.task-list');
            
            taskLists.forEach(list => {
                list.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    list.style.backgroundColor = 'rgba(0, 0, 0, 0.03)';
                });
                
                list.addEventListener('dragleave', () => {
                    list.style.backgroundColor = '';
                });
                
                list.addEventListener('drop', (e) => {
                    e.preventDefault();
                    list.style.backgroundColor = '';
                    
                    const taskId = e.dataTransfer.getData('taskId');
                    const fromStatus = e.dataTransfer.getData('fromStatus');
                    const toStatus = list.dataset.status;
                    
                    if (fromStatus !== toStatus) {
                        moveTask(taskId, toStatus);
                    }
                });
            });
        }

        // Move task to new status
        function moveTask(taskId, newStatus) {
            const project = getCurrentProject();
            if (!project) return;
            
            const task = project.tasks.find(t => t.id === taskId);
            if (!task) return;
            
            task.status = newStatus;
            task.updatedAt = new Date().toISOString();
            
            saveState();
            renderTasks();
            
            // Check if all tasks are done
            checkProjectCompletion(project);
        }

        // Check if project is completed
        function checkProjectCompletion(project) {
            if (project.tasks.length === 0) return;
            
            const allDone = project.tasks.every(t => t.status === 'done');
            
            if (allDone && !project.completed) {
                project.completed = true;
                project.completedAt = new Date().toISOString();
                alert(`Chúc mừng! Dự án "${project.name}" đã hoàn thành!`);
            } else if (!allDone && project.completed) {
                project.completed = false;
                project.completedAt = null;
            }
            
            saveState();
        }

        // Show add task form in column
        function showAddTaskForm(status) {
            document.getElementById(`add-task-form-${status}`).classList.add('active');
        }

        // Hide add task form in column
        function hideAddTaskForm(status) {
            document.getElementById(`add-task-form-${status}`).classList.remove('active');
        }

        // Add task from form in column
        function addTaskFromForm(status) {
            const input = document.querySelector(`#add-task-form-${status} .add-task-input`);
            const title = input.value.trim();
            
            if (!title) return;
            
            const project = getCurrentProject();
            if (!project) {
                alert('Vui lòng chọn một dự án trước khi thêm công việc');
                return;
            }
            
            const newTask = {
                id: Date.now().toString(),
                title,
                description: '',
                status,
                priority: 'medium',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            project.tasks.unshift(newTask);
            saveState();
            renderTasks();
            
            // Reset form
            input.value = '';
            hideAddTaskForm(status);
        }

        // Show add project modal
        function showAddProjectModal() {
            document.getElementById('project-name').value = '';
            document.getElementById('project-desc').value = '';
            document.getElementById('project-address').value = '';
            document.getElementById('project-uploaded-images').innerHTML = '';
            state.uploadedImages.project = [];
            
            showModal('add-project-modal');
        }

        // Show add task modal
        function showAddTaskModal() {
            if (!state.currentProjectId) {
                alert('Vui lòng chọn một dự án trước khi thêm công việc');
                return;
            }
            
            document.getElementById('task-title').value = '';
            document.getElementById('task-desc').value = '';
            document.getElementById('task-status').value = 'pending';
            document.getElementById('task-priority').value = 'medium';
            document.getElementById('task-deadline').value = '';
            document.getElementById('task-tags').value = '';
            document.getElementById('task-notes').value = '';
            document.getElementById('task-uploaded-images').innerHTML = '';
            state.uploadedImages.task = [];
            
            showModal('add-task-modal');
        }

        // Handle image upload
        function handleImageUpload(event, type) {
            const files = event.target.files;
            const uploadedImagesContainer = document.getElementById(`${type}-uploaded-images`);
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const imageId = Date.now().toString() + i;
                    state.uploadedImages[type].push({
                        id: imageId,
                        src: e.target.result
                    });
                    
                    const imagePreview = document.createElement('div');
                    imagePreview.className = 'image-preview';
                    imagePreview.innerHTML = `
                        <img src="${e.target.result}" alt="Preview">
                        <span class="image-remove" onclick="removeImage('${type}', '${imageId}')">&times;</span>
                    `;
                    uploadedImagesContainer.appendChild(imagePreview);
                };
                
                reader.readAsDataURL(file);
            }
        }

        // Remove image
        function removeImage(type, imageId) {
            state.uploadedImages[type] = state.uploadedImages[type].filter(img => img.id !== imageId);
            
            const uploadedImagesContainer = document.getElementById(`${type}-uploaded-images`);
            const imagePreview = uploadedImagesContainer.querySelector(`[data-image-id="${imageId}"]`);
            if (imagePreview) {
                imagePreview.remove();
            }
            
            // Re-render all images
            uploadedImagesContainer.innerHTML = '';
            state.uploadedImages[type].forEach(img => {
                const imagePreview = document.createElement('div');
                imagePreview.className = 'image-preview';
                imagePreview.dataset.imageId = img.id;
                imagePreview.innerHTML = `
                    <img src="${img.src}" alt="Preview">
                    <span class="image-remove" onclick="removeImage('${type}', '${img.id}')">&times;</span>
                `;
                uploadedImagesContainer.appendChild(imagePreview);
            });
        }

        // Add new project
        function addNewProject() {
            const name = document.getElementById('project-name').value.trim();
            const description = document.getElementById('project-desc').value.trim();
            const address = document.getElementById('project-address').value.trim();
            
            if (!name) {
                alert('Vui lòng nhập tên dự án');
                return;
            }
            
            const newProject = {
                id: Date.now().toString(),
                name,
                description,
                address,
                images: state.uploadedImages.project.map(img => img.src),
                tasks: [],
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                completed: false
            };
            
            state.projects.unshift(newProject);
            state.currentProjectId = newProject.id;
            saveState();
            renderProjectOptions();
            renderTasks();
            hideModal('add-project-modal');
            
            alert('Đã thêm dự án mới thành công!');
        }

        // Add new task
        function addNewTask() {
            const title = document.getElementById('task-title').value.trim();
            const description = document.getElementById('task-desc').value.trim();
            const status = document.getElementById('task-status').value;
            const priority = document.getElementById('task-priority').value;
            const deadline = document.getElementById('task-deadline').value;
            const tagsInput = document.getElementById('task-tags').value.trim();
            const notes = document.getElementById('task-notes').value.trim();
            
            if (!title) {
                alert('Vui lòng nhập tiêu đề công việc');
                return;
            }
            
            const project = getCurrentProject();
            if (!project) return;
            
            // Process tags
            const tags = tagsInput ? tagsInput.split(',').map(tag => tag.trim()).filter(tag => tag) : [];
            
            const newTask = {
                id: Date.now().toString(),
                title,
                description,
                status,
                priority,
                deadline,
                tags,
                notes,
                images: state.uploadedImages.task.map(img => img.src),
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            project.tasks.unshift(newTask);
            project.updatedAt = new Date().toISOString();
            saveState();
            renderTasks();
            hideModal('add-task-modal');
            
            alert('Đã thêm công việc mới thành công!');
        }

        // View task details
        function viewTask(taskId) {
            const project = getCurrentProject();
            if (!project) return;
            
            const task = project.tasks.find(t => t.id === taskId);
            if (!task) return;
            
            state.currentTask = task;
            
            const modalBody = document.querySelector('#task-detail-modal .modal-body');
            const deadlineText = task.deadline ? formatDate(task.deadline) : 'Không có hạn';
            const priorityText = getPriorityText(task.priority);
            const statusText = getStatusText(task.status);
            
            let tagsHTML = '';
            if (task.tags && task.tags.length > 0) {
                tagsHTML = `
                    <div class="form-group">
                        <label class="form-label">Tags</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                            ${task.tags.map(tag => `<span class="task-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
            }
            
            let imagesHTML = '';
            if (task.images && task.images.length > 0) {
                imagesHTML = `
                    <div class="form-group">
                        <label class="form-label">Hình ảnh đính kèm</label>
                        <div class="uploaded-images">
                            ${task.images.map(img => `
                                <div class="image-preview">
                                    <img src="${img}" alt="Task Image">
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            modalBody.innerHTML = `
                <div class="form-group">
                    <label class="form-label">Tiêu đề</label>
                    <div class="form-input" style="background-color: #f8f9fa;">${task.title}</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Mô tả</label>
                    <div class="form-textarea" style="background-color: #f8f9fa; min-height: auto;">${task.description || 'Không có mô tả'}</div>
                </div>
                ${tagsHTML}
                <div class="form-group">
                    <label class="form-label">Trạng thái</label>
                    <div class="form-input" style="background-color: #f8f9fa;">${statusText}</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Ưu tiên</label>
                    <div class="form-input" style="background-color: #f8f9fa;">${priorityText}</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Hạn hoàn thành</label>
                    <div class="form-input" style="background-color: #f8f9fa;">${deadlineText}</div>
                </div>
                ${imagesHTML}
                ${task.notes ? `
                <div class="form-group">
                    <label class="form-label">Ghi chú</label>
                    <div class="form-textarea" style="background-color: #f8f9fa; min-height: auto;">${task.notes}</div>
                </div>
                ` : ''}
                <div class="form-group">
                    <label class="form-label">Ngày tạo</label>
                    <div class="form-input" style="background-color: #f8f9fa;">${formatDate(task.createdAt)}</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Cập nhật lần cuối</label>
                    <div class="form-input" style="background-color: #f8f9fa;">${formatDate(task.updatedAt)}</div>
                </div>
            `;
            
            document.getElementById('edit-task-btn').onclick = () => editTask(task.id);
            
            showModal('task-detail-modal');
        }

        // Edit task
        function editTask(taskId) {
            const project = getCurrentProject();
            if (!project) return;
            
            const task = project.tasks.find(t => t.id === taskId);
            if (!task) return;
            
            state.currentTask = task;
            state.uploadedImages['edit-task'] = task.images ? task.images.map(img => ({ id: Date.now().toString(), src: img })) : [];
            
            // Fill the edit form with task data
            document.getElementById('edit-task-title').value = task.title;
            document.getElementById('edit-task-desc').value = task.description || '';
            document.getElementById('edit-task-status').value = task.status;
            document.getElementById('edit-task-priority').value = task.priority;
            document.getElementById('edit-task-deadline').value = task.deadline || '';
            document.getElementById('edit-task-tags').value = task.tags ? task.tags.join(', ') : '';
            document.getElementById('edit-task-notes').value = task.notes || '';
            
            // Render existing images
            const uploadedImagesContainer = document.getElementById('edit-task-uploaded-images');
            uploadedImagesContainer.innerHTML = '';
            
            state.uploadedImages['edit-task'].forEach(img => {
                const imagePreview = document.createElement('div');
                imagePreview.className = 'image-preview';
                imagePreview.innerHTML = `
                    <img src="${img.src}" alt="Preview">
                    <span class="image-remove" onclick="removeImage('edit-task', '${img.id}')">&times;</span>
                `;
                uploadedImagesContainer.appendChild(imagePreview);
            });
            
            hideModal('task-detail-modal');
            showModal('edit-task-modal');
        }

        // Save task changes
        function saveTaskChanges() {
            if (!state.currentTask) return;
            
            const project = getCurrentProject();
            if (!project) return;
            
            const task = project.tasks.find(t => t.id === state.currentTask.id);
            if (!task) return;
            
            // Get values from form
            const title = document.getElementById('edit-task-title').value.trim();
            const description = document.getElementById('edit-task-desc').value.trim();
            const status = document.getElementById('edit-task-status').value;
            const priority = document.getElementById('edit-task-priority').value;
            const deadline = document.getElementById('edit-task-deadline').value;
            const tagsInput = document.getElementById('edit-task-tags').value.trim();
            const notes = document.getElementById('edit-task-notes').value.trim();
            
            if (!title) {
                alert('Vui lòng nhập tiêu đề công việc');
                return;
            }
            
            // Process tags
            const tags = tagsInput ? tagsInput.split(',').map(tag => tag.trim()).filter(tag => tag) : [];
            
            // Update task properties
            task.title = title;
            task.description = description;
            task.status = status;
            task.priority = priority;
            task.deadline = deadline;
            task.tags = tags;
            task.notes = notes;
            task.images = state.uploadedImages['edit-task'].map(img => img.src);
            task.updatedAt = new Date().toISOString();
            
            project.updatedAt = new Date().toISOString();
            saveState();
            renderTasks();
            hideModal('edit-task-modal');
            
            alert('Đã cập nhật công việc thành công!');
        }

        // Delete current task
        function deleteCurrentTask() {
            if (!state.currentTask) return;
            
            deleteTask(state.currentTask.id);
            hideModal('task-detail-modal');
        }

        // Delete task
        function deleteTask(taskId) {
            if (!confirm('Bạn có chắc chắn muốn xóa công việc này?')) return;
            
            const project = getCurrentProject();
            if (!project) return;
            
            project.tasks = project.tasks.filter(t => t.id !== taskId);
            project.updatedAt = new Date().toISOString();
            saveState();
            renderTasks();
            
            alert('Đã xóa công việc thành công!');
        }

        // Get status text
        function getStatusText(status) {
            const statusMap = {
                'pending': 'Đang chờ',
                'doing': 'Đang làm',
                'blocked': 'Bị mắc',
                'done': 'Đã hoàn thành'
            };
            return statusMap[status] || status;
        }

        // Get priority text
        function getPriorityText(priority) {
            const priorityMap = {
                'low': 'Thấp',
                'medium': 'Trung bình',
                'high': 'Cao'
            };
            return priorityMap[priority] || priority;
        }

        // Format date
        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            
            const date = new Date(dateString);
            return date.toLocaleDateString('vi-VN', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        }

        // Update clock
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            clockElement.textContent = `${hours}:${minutes}:${seconds}`;
        }

        // Show modal
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        // Hide modal
        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Save state to localStorage
        function saveState() {
            localStorage.setItem('hiderBuildingProjects', JSON.stringify(state.projects));
        }

        // Load sample data
        function loadSampleData() {
            state.projects = [
                {
                    id: '1',
                    name: 'Dự án Sunshine City',
                    description: 'Khu đô thị hiện đại với đầy đủ tiện ích',
                    address: '123 Nguyễn Văn Linh, Quận 7, TP.HCM',
                    images: [],
                    tasks: [
                        {
                            id: '101',
                            title: 'Khảo sát địa chất',
                            description: 'Tiến hành khảo sát địa chất khu vực xây dựng',
                            status: 'done',
                            priority: 'high',
                            deadline: '2023-06-15',
                            tags: ['khảo sát', 'địa chất'],
                            notes: 'Đã hoàn thành đúng hạn',
                            images: [],
                            createdAt: '2023-05-10T08:00:00',
                            updatedAt: '2023-06-15T17:30:00'
                        },
                        {
                            id: '102',
                            title: 'Xin giấy phép xây dựng',
                            description: 'Chuẩn bị hồ sơ và xin giấy phép xây dựng',
                            status: 'doing',
                            priority: 'high',
                            deadline: '2023-07-20',
                            tags: ['pháp lý', 'giấy phép'],
                            notes: 'Đang chờ phê duyệt từ Sở Xây dựng',
                            images: [],
                            createdAt: '2023-06-01T08:00:00',
                            updatedAt: '2023-06-25T10:15:00'
                        },
                        {
                            id: '103',
                            title: 'Thiết kế chi tiết căn hộ mẫu',
                            description: 'Thiết kế nội thất cho căn hộ mẫu',
                            status: 'pending',
                            priority: 'medium',
                            deadline: '2023-08-01',
                            tags: ['thiết kế', 'nội thất'],
                            notes: '',
                            images: [],
                            createdAt: '2023-06-20T08:00:00',
                            updatedAt: '2023-06-20T08:00:00'
                        }
                    ],
                    createdAt: '2023-05-01T08:00:00',
                    updatedAt: '2023-06-25T10:15:00',
                    completed: false
                },
                {
                    id: '2',
                    name: 'Dự án Biệt thự Biển Đông',
                    description: 'Khu biệt thự nghỉ dưỡng cao cấp view biển',
                    address: '789 Võ Nguyên Giáp, Đà Nẵng',
                    images: [],
                    tasks: [
                        {
                            id: '201',
                            title: 'Lựa chọn nhà thầu',
                            description: 'Đấu thầu và lựa chọn nhà thầu xây dựng',
                            status: 'blocked',
                            priority: 'high',
                            deadline: '2023-06-30',
                            tags: ['đấu thầu', 'nhà thầu'],
                            notes: 'Chờ phê duyệt ngân sách',
                            images: [],
                            createdAt: '2023-05-15T08:00:00',
                            updatedAt: '2023-06-20T14:20:00'
                        },
                        {
                            id: '202',
                            title: 'Thiết kế cảnh quan',
                            description: 'Thiết kế cảnh quan tổng thể khu biệt thự',
                            status: 'pending',
                            priority: 'medium',
                            deadline: '2023-07-15',
                            tags: ['thiết kế', 'cảnh quan'],
                            notes: '',
                            images: [],
                            createdAt: '2023-06-10T08:00:00',
                            updatedAt: '2023-06-10T08:00:00'
                        }
                    ],
                    createdAt: '2023-05-10T08:00:00',
                    updatedAt: '2023-06-20T14:20:00',
                    completed: false
                }
            ];
            
            saveState();
        }

        // Initialize the app
        init();
    </script>
</body>

</html>